---
title: "Exploring the BRFSS data"
output: 
  html_document: 
    fig_height: 4
    highlight: pygments
    theme: spacelab
---

## Setup

### Load packages

```{r load-packages, message = FALSE}
library(ggplot2)
library(dplyr)
```

### Load data


```{r load-data}
load("brfss2013.RData")
```

* * *

## Part 1: Data

The data comes from the Behavioral Risk Factor Surveillance System (BRFSS), an observational study conducted in all 50 states in the US and participating US territories.  The population of interest are non-institutionalized adults aged 18+ living in the United States or participating territories.

Data is sampled by surveying randomly selected adults from households contacted via a landline; or, cellular phone users that reside in a private residence or student housing at a college or university.  This study is observational, and therefore no causal relationships can be inferred from this data.

There are many potential problems with the data collection.  Certain populations may be less likely to answer their phone, or may be at home less and therefore unable to be sampled.  In addition, the proportion of samples from each state is not in line with the proportion of the the total US population for each state.  Therefore certain states and / or regions may be over or under sampled within the data.

* * *

## Part 2: Research questions

I'm interested in how the dominant political view within states associates with the health and frequency of routine health care of the state's military veterans.  States will be typed into two classes - red or blue.  Red states will be defined as states that Mitt Romney carried in the 2012 presidential election, and blue states will be those carried by Barak Obama.  Since Guam and Puerto Rico do not vote in the presidential election, I will exclude them from my analysis.

I will first look at how general health between veterans and non-veterans differ by state type.  Second, I will look at how frequency of routine health care varies between veterans and non-veterans by state type.

Members of the US military are often encouraged to smoke tobacco.  My third question will look at the association of respondents who have been diagnosed with a heart attack with smokers and non-smokers among veterans and non-veterans.

**Research quesion 1:**

What is the general health of veterans vs. non-veterans in red and blue states?

**Research quesion 2:**

What is the frequency of routine health care of veterans vs. non-veterans in red and blue states?

**Research quesion 3:**

What is the heart-health of veterans vs. non-veterans among those who have smoked tobacco and those who have not?


* * *

## Part 3: Exploratory data analysis

First, I will create a new data frame with only the features I'll need for my analysis.  I'll also get rid of any rows with N/A values.

```{r}

# select columns I want for my questions

# State column 1
# Veteran column 45
# Time since checkup 26
# General Health 19
# Smoker 68
# Heart Attack 33

# list of columns I want

list<-c(1,19,26,33,45,68)

# create new dataframe with only the columns I want

mydata<-brfss2013[,list]

# Use complete.cases to get rid of N/As

completes<-complete.cases(mydata)

mydata<-mydata[completes,]

# dimensions of data frame with N/A removed

dim(mydata)


```

I have 466,472 observaions of 6 features.  I now need to classify each state as either red or blue and add that into my dataframe.  This data is from 2013, so I will use the results of the 2012 presidential election to classify the states.  Red states will be those that went to Mitt Romney and blue state will be those that went to Barak Obama.

```{r}
# pull out states to classify as red or blue

states<-mydata %>%
  group_by(X_state) %>%
  summarize()

# write out states to append "Blue" or "Red" status
# write.csv(states, "matchstates.csv")

# Read in state data with state Type added:

statejoin<-read.csv("matchstates.csv")

# Convert X_state to character to facilitate join

mydata$X_state<-as.character(mydata$X_state)

statejoin$X_state<-as.character(statejoin$X_state)

# Use inner join to add "Type" column to mydata

mydata<-inner_join(mydata, statejoin)

# convert factors to numeric

mydata$genhlth<-as.numeric(mydata$genhlth)

mydata$checkup1<-as.numeric(mydata$checkup1)

# quick peek at table

head(mydata)
```


**Research quesion 1:**

What is the general health of veterans vs. non-veterans in red and blue states?

```{r}

```



**Research quesion 2:**

What is the frequency of routine health care of veterans vs. non-veterans in red and blue states?

```{r}

```



**Research quesion 3:**

What is the heart-health of veterans vs. non-veterans among those who have smoked tobacco and those who have not?


```{r}

```

